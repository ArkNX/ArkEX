# 设计思路和需要解决的问题

## 根据具体落地项目收到的需求

- [ ] 线程增加`watch dog`参数增加，修改`arg`的`void*`为`argBase*`, 公共参数放在父类，特殊参数放在自定义的子类中, 还可以在`CreateThread`内部做是否子类的检查
- [ ] 线程的`watch dog`参数和`ErrorCallback`不互斥
- [ ] 线程创建的时候判断`thread logic id`的线程当前的状态，来决定是否真的创建
- [ ] 线程增加父子关系，父线程为`PluginContainer`所在的线程，子线程为模块业务层的线程，当父线程挂掉的时候，子线程应该同时挂掉(这种情况下，回调需要特殊处理)
- [ ] 增加线程雪崩熔断处理(当短时间内重启次数过多，禁止再次重启线程)
- [ ] 增加线程可用机制(单个进程限制线程数量，免得出现线程过多，占用硬件资源，可能会掩盖问题)

------

## 最初的设计基础思路

- [x] 修改插件可以执行在指定的线程 **为了解决性能问题, 不想分进程的情况**
- [x] 修改插件中的模块可以动态注册和卸载 **为了解决业务开发者自己来创建和使用模块**
- [x] 模块的功能可以做同样的事，但是事情的内容/对象有变化(通过配置文件) **为了解决模块复用**